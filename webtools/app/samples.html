<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="styles.css">
  </head>
  <body>
    <h1>Generate DrumKid samples</h1>
    <p>This tool helps you generate samples to load into DrumKid. For each channel, you can either use the default sample or upload your own. If you're struggling to fit larger samples into DrumKid, you can choose to load silence into any of the channels to make some extra room. If the total size of your five samples is too large, the tool will warn you after generating them (and the Arduino software will not let you upload them).</p>
    <p>The tool will generate a ZIP file containing five Arduino .h files. Copy these files into your DrumKid firmware folder (firmware version 1.2+) and upload your firmware as normal.</p>
    <form id="mainForm" action="generatesamples" method="post" encType="multipart/form-data">
      <h3>Channel 1 (default = kick)</h3>
      <input name="file1" type="file" onchange="testChange(1)"><br/>
      <select name="file1Source">
        <option value="uploaded">Use uploaded file</option>
        <option selected value="default">Use default file</option>
        <option value="silent">Use silence</option>
      </select>
      <h3>Channel 2 (default = closed hat)</h3>
      <input name="file2" type="file" onchange="testChange(2)"><br/>
      <select name="file2Source">
        <option value="uploaded">Use uploaded file</option>
        <option selected value="default">Use default file</option>
        <option value="silent">Use silence</option>
      </select>
      <h3>Channel 3 (default = snare)</h3>
      <input name="file3" type="file" onchange="testChange(3)"><br/>
      <select name="file3Source">
        <option value="uploaded">Use uploaded file</option>
        <option selected value="default">Use default file</option>
        <option value="silent">Use silence</option>
      </select>
      <h3>Channel 4 (default = rim)</h3>
      <input name="file4" type="file" onchange="testChange(4)"><br/>
      <select name="file4Source">
        <option value="uploaded">Use uploaded file</option>
        <option selected value="default">Use default file</option>
        <option value="silent">Use silence</option>
      </select>
      <h3>Channel 5 (default = tom)</h3>
      <input name="file5" type="file" onchange="testChange(5)"><br/>
      <select name="file5Source">
        <option value="uploaded">Use uploaded file</option>
        <option selected value="default">Use default file</option>
        <option value="silent">Use silence</option>
      </select>
      <br/><br/>
      <input type="submit" value="Generate samples">
    </form>
    <script>
      function testChange(fileNum) {
        var fileList = document.getElementsByName("file"+fileNum)[0].files;
        var sourceSelect = document.getElementsByName("file"+fileNum+"Source")[0];
        if(fileList.length==1) {
          sourceSelect.value = "uploaded";
        } else {
          sourceSelect.value = "default";
        }
      }
    </script>
  </body>
</html>
